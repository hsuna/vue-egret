/*!
  * vue-egret.js v1.4.0
  * Copyright (c) 2020-2021 Hsuna
  * Released code under the ICU License.
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).VueEgret=e()}(this,(function(){"use strict";function t(t,e,s,n){Object.defineProperty(t,e,{value:s,enumerable:!!n,writable:!0,configurable:!0})}const e=new RegExp(`[^${/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source}.$_\\d]`);function s(t,e,s){}const n="__proto__"in{},i=Object.freeze({});function r(t){return null==t}function o(t){return null!==t&&"object"==typeof t}function a(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===h?JSON.stringify(t,null,2):String(t)}function c(t){const e=Number(t);return Array.isArray(t)||isNaN(e)||""===t?t:e}const h=Object.prototype.toString;function l(t){return"[object Object]"===h.call(t)}function p(t){const e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}const u=/^hook:/;const f=Object.prototype.hasOwnProperty;function d(t,e){return f.call(t,e)}function _(t,e){if(t===e)return!0;const s=o(t),n=o(e);if(!s||!n)return!s&&!n&&String(t)===String(e);try{const s=Array.isArray(t),n=Array.isArray(e);if(s&&n)return t.length===e.length&&t.every((t,s)=>_(t,e[s]));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(s||n)return!1;{const s=Object.keys(t),n=Object.keys(e);return s.length===n.length&&s.every(s=>_(t[s],e[s]))}}catch(t){return!1}}function g(t,e){for(let s=0;s<t.length;s++)if(_(t[s],e))return s;return-1}function v(t,e){const s=Object.create(null),n=t.split(",");for(let t=0;t<n.length;t++)s[n[t]]=!0;return e?t=>s[t.toLowerCase()]:t=>s[t]}function m(t,e={},s=[]){Array.isArray(e)&&(s=e);const n={...e,tag:t,children:s.filter(Boolean)};return n.children.forEach(t=>t.parent=n),n}function y(t,e){const s=function(...t){const{fns:n}=s;if(!Array.isArray(n))return n.apply(e||this,t);{const s=[...n];let i=s.shift();for(;i;)i.apply(e||this,t),i=s.shift()}};return s.fns=t,s}function $(t,e,s){if(e)if(o(e)){Array.isArray(e)&&(e=function(t){let e={};for(let s=0;s<t.length;s++)t[s]&&(e={...e,...t[s]});return e}(e));const n=t.attrs||(t.attrs={});for(const i in e)if(n[i]=e[i],s){(t.on||(t.on={}))["update:"+i]=y((function(t){e[i]=t}))}}else;return t}function b(t,e){if(e)if(l(e)){const s=t.on={...t.on};for(const t in e){const n=s[t],i=e[t];s[t]=n?[].concat(n,i):i}}else;return t}function O(t,e){return"string"==typeof t?e+t:t}function w(t,e){return Array.isArray(t)||"string"==typeof t?Array.from(t).map((t,s)=>e(t,s)):"number"==typeof t?Array.from({length:t}).map((t,s)=>e(s+1,s)):o(t)?[].map.call(t,(s,n)=>e(t[s],s,n)):[]}v("slot,component",!0),v("key,ref,slot,slot-scope,is");let D=0;class A{constructor(){this.id=D++,this.subs=[]}depend(){A.target&&A.target.addDep(this)}addSub(t){this.subs.push(t)}removeSub(t){const e=this.subs.indexOf(t);e>-1&&this.subs.splice(e,1)}notify(){this.subs.forEach(t=>{t.update()})}}A.target=null;const k=[];function x(t){k.push(t),A.target=t}function j(){k.pop(),A.target=k[k.length-1]}const E=/^v-|^@|^:|^#/,C=/^(v-bind:|:)/,I=/^(v-on:|@)/,F=/^\[.*\]$/;function T(t){const e={tag:t.tag,key:t.key,ref:t.ref,refInFor:!1,attrs:[],on:[],nativeOn:[],directives:[],wrapDir:[]};return t.attrsList.forEach(t=>{if(E.test(t.name)){const s=function(t,e){let s="",n="",i=[];return t=t.replace(C,"v-bind:").replace(I,"v-on:"),[t,...i]=t.split("."),[s,n]=t.split(":"),{name:s.replace(E,""),expression:e,arg:n?F.test(n)?n.slice(1,-1):`"${n}"`:"",rawArg:n||"",modifiers:i.reduce((t,e)=>Object.assign(t,{[e]:!0}),{})}}(t.name,t.value);C.test(t.name)?(e.attrs.push(s),s.modifiers&&s.modifiers.sync&&e.on.push({...s,name:"sync"})):I.test(t.name)?s.modifiers.native?e.nativeOn.push(s):e.on.push(s):e.directives.push(s)}else e.attrs.push({name:"bind",arg:t.name,expression:`_n("${t.value}")`})}),t.text&&e.attrs.push({name:"text",arg:'"text"',expression:t.text}),t.ref&&(e.refInFor=function(t){let e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t)),e}const S=function(t){const e={};return function(s){return e[s]||(e[s]=t(s))}}(t=>{const e="~"===t.charAt(0),s="!"===(t=e?t.slice(1):t).charAt(0);return{name:t=s?t.slice(1):t,once:e,capture:s}});var N={on:function(t,e){t.wrapDir.push(t=>`_g(${t},${e.expression})`)},bind:function(t,e){t.wrapDir.push(t=>`_b(${t},${e.expression}${e.modifiers&&e.modifiers.sync?",true":""})`)}};const V=/\{\{([^}]+)\}\}/g,P=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,H=/\([^)]*?\);*$/,M=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,z=t=>t.replace(/,$/,"");function L(t){const e=T(t);let s="{";return e.directives&&e.directives.length&&(s+=function(t,e){let s="";return t.forEach(t=>{let n=!0;const i=N[t.name];i&&(n=!!i(e,t)),n&&(s+=`{name:"${t.name}",value:_n(${t.expression}),expression:"${t.expression}"${t.arg?",arg:"+t.arg:""}${t.modifiers?",modifiers:"+JSON.stringify(t.modifiers):""}},`)}),s?`directives:[${z(s)}],`:""}(e.directives,e)),e.key&&(s+=`key:${e.key},`),e.ref&&(s+=`ref:${e.ref},`),e.refInFor&&(s+="refInFor:true,"),e.attrs&&e.attrs.length&&(s+=`attrs:${function(t){let e="";return t.forEach(t=>{var s;"text"===t.name?e+=`${t.rawArg||t.arg}:${s=t.expression,`_s("${s.replace(V,'"+($1)+"')}")`},`:e+=`${t.rawArg||t.arg}:${t.expression},`}),e?`{${z(e)}}`:""}(e.attrs)},`),e.on&&e.on.length&&(s+=`on:${W(e.on)},`),e.nativeOn&&e.nativeOn.length&&(s+=`nativeOn:${W(e.nativeOn)},`),s=z(s)+"}",e.wrapDir&&e.wrapDir.length&&e.wrapDir.forEach(t=>{s=t(s)}),s}function W(t){let e="";return t.forEach(t=>{const s="sync"==t.name;let n=!1,i=t.arg;s&&(i=`_p(${i}, "update:")`,n=!0),t.modifiers&&(t.modifiers.capture&&(i=`_p(${i}, "!")`,n=!0),t.modifiers.once&&(i=`_p(${i}, "~")`,n=!0)),n&&(i=`[${i}]`),e+=`${i}:${function(t,e){const s=(e?function(t){const e=function(t){let e,s,n,i;function r(){return e.charCodeAt(++s)}function o(){return s>=void 0}function a(t){return 34===t||39===t}function c(t){let e=1;for(n=s;!o();)if(a(t=r()))h(t);else if(91===t&&e++,93===t&&e--,0===e){i=s;break}}function h(t){const e=t;for(;!o()&&(t=r())!==e;);}if((t=t.trim()).indexOf("[")<0||t.lastIndexOf("]")<NaN)return s=t.lastIndexOf("."),s>-1?{exp:t.slice(0,s),key:'"'+t.slice(s+1)+'"'}:{exp:t,key:null};for(e=t,s=n=i=0;s<void 0;){const t=e.charCodeAt(++s);a(t)?h(t):91===t&&c(t)}return{exp:t.slice(0,n),key:t.slice(n+1,i)}}(t);return null===e.key?t+"=$event":`$set(${e.exp}, ${e.key}, $event)`}(t.expression):t.expression)||"",n=M.test(s),i=P.test(s),r=M.test(s.replace(H,""));if(t.modifiers){let e="";for(const s in t.modifiers)B[s]&&(e+=B[s]);return`function($event){${e}${n?`return ${s}($event)`:i?`return (${s})($event)`:r?"return "+s:s}}`}return n||i?s:`function($event){${r?"return "+s:s}}`}(t,s)},`}),e?`{${z(e)}}`:""}const B={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:(G="$event.target !== $event.currentTarget",`if(${G})return null;`)};var G;const J=/\/\s*>/,U=/^<([^>\s\/]+)((\s+[^=>\s]+(\s*=\s*((\"[^"]*\")|(\'[^']*\')|[^>\s]+))?)*)\s*\/?\s*>/m,R=/([^=\s]+)(\s*=\s*((\"([^"]*)\")|(\'([^']*)\')|[^>\s]+))?/gm,Z=/^<\/([^>\s]+)[^>]*>/m;class X{constructor(t,e){this.options=e,this._parse(t)}_parse(t){let e,s=!1;for(;t.length>0;)"\x3c!--"==t.substring(0,4)?(e=t.indexOf("--\x3e"),-1!=e?(this.options.comment(t.substring(4,e)),t=t.substring(e+3),s=!1):s=!0):"</"==t.substring(0,2)?Z.test(t)?(t=t.replace(Z,this.parseEndTag.bind(this)),s=!1):s=!0:"<"==t.charAt(0)&&(U.test(t)?(t=t.replace(U,this.parseStartTag.bind(this)),s=!1):s=!0),s&&(e=t.indexOf("<"),-1==e?(this.options.characters(t),t=""):(this.options.characters(t.substring(0,e)),t=t.substring(e))),s=!0}parseStartTag(t,e,s){const n=this.parseAttributes(e,s),i=J.test(t);return this.options.startElement(e,n,i),""}parseEndTag(t,e){return this.options.endElement(e),""}parseAttributes(t,e){const s=[];return e.replace(R,(...e)=>{const n=this.parseAttribute.call(this,t,...e);return n.name&&"/"!==n.name&&s.push(n),""}),s}parseAttribute(t,e,s){let n="";arguments[7]?n=arguments[8]:arguments[5]?n=arguments[6]:arguments[3]&&(n=arguments[4]);return{name:s,value:!n&&!arguments[3]?null:n}}}const K=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,q=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Q=/^\(|\)$/g;function Y(t,e){const s=tt(t,":"+e)||tt(t,"v-bind:"+e);if(null!=s)return s;const n=tt(t,e);return null!=n?JSON.stringify(n):void 0}function tt(t,e){const s=t.attrsMap[e],n=t.attrsList;for(let t=0,s=n.length;t<s;t++)if(n[t].name===e){n.splice(t,1);break}return s}class et{static created(t){const e=new et;return new X(t,e),e}startElement(t,e,s){if(this._parent=this._target,this._target=function(t,e,s){return{tag:t,text:"",attrsList:e,attrsMap:e.reduce((t,e)=>Object.assign(t,{[e.name]:e.value}),{}),parent:s,children:[]}}(t,e,this._parent),this._root){if(!this._parent)throw new Error("tow root")}else this._root=this._target;s&&this.endElement(t)}endElement(t){let e;(e=Y(this._target,"is"))&&(this._target.component=e),(e=Y(this._target,"key"))&&(this._target.key=e),(e=Y(this._target,"ref"))&&(this._target.ref=e),(e=tt(this._target,"v-for"))&&(this._target.for=function(t){const e=t.match(K);if(!e)return;const s={for:"",alias:""};s.for=e[2].trim();const n=e[1].trim().replace(Q,""),i=n.match(q);return i?(s.alias=n.replace(q,"").trim(),s.iterator1=i[1].trim(),i[2]&&(s.iterator2=i[2].trim())):s.alias=n,s}(e)),(e=tt(this._target,"v-if"))?this._target.if=this.addIfConditions(e):(e=tt(this._target,"v-else-if"))?this._target.elseif=this.addIfConditions(e,!0):void 0!==(e=tt(this._target,"v-else"))&&(this._target.else=this.addIfConditions(!0,!0)),!this._parent||this._target===this._root||this._target.elseif||this._target.else||this._parent.children.push(this._target),this._target=this._parent,this._parent&&(this._parent=this._parent.parent)}comment(t){}characters(t){this._target&&(this._target.text=t.replace(/^\s+|\s+$|\r|\n/g,""))}addIfConditions(t,e=!1){let s;if(e){const t=this._target.parent;if(t){const e=t.children[t.children.length-1];e&&(s=e)}}else s=this._target;return s&&(s.ifConditions||(s.ifConditions=[]),s.ifConditions.push({exp:t,target:this._target})),t}get root(){return this._root}}function st(t){return`with(this){ return ${function t(e,s=!0){const n=e.for;return s&&n&&n.for?`_l((${n.for}), function(${[n.alias,n.iterator1,n.iterator2].filter(Boolean).join(",")}){return ${t(e,!1)}})`:s&&e.ifConditions?"("+e.ifConditions.map(({exp:e,target:s})=>`${e}?${t(s,!1)}:`).join("")+'"")':`_c(${e.component||`"${e.tag}"`},${L(e)}${e.children.length>0?`,[].concat(${e.children.map(e=>t(e))})`:""})`}(et.created(t).root)};}`}const nt="__VUE_EGRET_DEFAULT__";class it{constructor(t){this._vm=t,this._components=Object.assign({},Mt._components,this._vm._components),this._directives=Object.assign({},Mt._directives,this._vm._directives),this._init()}_init(){var t;(t=this._vm)._c=m,t._n=c,t._s=a,t._q=_,t._i=g,t._l=w,t._b=$,t._g=b,t._p=O,t.$createVNode=m,this._render="function"==typeof this._vm.$options.render?this._vm.$options.render:Function.prototype.constructor(st(this._vm.$options.template)),this._tick()}_tick(){if(this._vm){const t=this._createVNode();this._vnode=this._patch(this._vnode,t)}}inserted(){this._triggerDirective("inserted",this._vnode)}update(){this._tick()}destroy(){this._vnode&&this._destroyDisObj(this._vnode),this._vm=null}_patch(t,e){if(t)if(this._sameVNode(t,e))this._patchVNode(t,e);else{const s=t.parent.sp;if(s){const n=this._createDisObj(e);s.addChildAt(n,s.getChildIndex(t.sp)),this._destroyDisObj(t)}}else this._vm.$el=this._createDisObj(e);return e}_patchVNode(t,e){e.sp=t.sp,e.vm=t.vm,this._updateDisObj(t,e)}_updateChildren(t,e,s){if(t===e)return;let n=0,i=0,r=t.length-1,o=e.length-1,a=t[0],c=t[r],h=e[0],l=e[o];for(;n<=r&&i<=o;)if(a)if(c)if(this._sameVNode(a,h))this._patchVNode(a,h),a=t[++n],h=e[++i];else if(this._sameVNode(c,l))this._patchVNode(c,l),c=t[--r],l=e[--o];else{let o;for(let e=n;e<=r;e++)if(this._sameVNode(h,t[e])){this._patchVNode(t[e],h),o=h.sp,s.setChildIndex(o,i);const r=t.splice(e,1)[0];t.splice(i,0,r),a=t[++n];break}o||(o=this._createDisObj(h),s.addChildAt(o,i)),h=e[++i]}else c=t[--r];else a=t[++n];if(n>r){let t;for(;i<=o;++i)h=e[i],t=this._createDisObj(h),s.addChildAt(t,i)}else if(i>o)for(;n<=r;++n)a=t[n],this._destroyDisObj(a)}_createVNode(){return this._render.call(this._vm,m)}_sameVNode(t,e){return t.key===e.key&&t.tag===e.tag&&(t.attrs||{}).key===(e.attrs||{}).key}_createDisObj(t){let e=this._components[t.tag];if(x(),e){const s={parent:this._vm,propsData:{},_propsKeys:[],attrs:{},listeners:{}},n=e.options.props;for(const e in n)s._propsKeys.push(e),d(this._vm.$props,e)&&(s.propsData[e]=this._vm.$props[e]),d(t.attrs,e)&&(s.propsData[e]=t.attrs[e]);for(const e in t.attrs)d(s.propsData,e)||(s.attrs[e]=t.attrs[e]);t.vm=new e(s),t.sp=t.vm.$el;for(const e in t.on)s.listeners[e]=t.on[e]=this._addInvoker(e,t);for(const e in t.nativeOn)t.nativeOn[e]=this._addInvoker(e,t,!0)}else if(e=egret[t.tag]||function(t,e=""){const s=e.split(".");for(const e of s){if(!t[e])return null;t=t[e]}return t}(window,t.tag),e){t.sp=new e,t.sp[nt]={};for(const e in t.on)t.on[e]=this._addInvoker(e,t);for(const e in t.attrs)t.sp[nt][e]=t.sp[e],t.sp[e]=t.attrs[e]}if(!e)throw new Error(`Then [${t.tag}] Node is undefined!!!`);if(t.ref){const e=this._vm.$refs,s=t.vm||t.sp;t.refInFor?Array.isArray(e[t.ref])?e[t.ref].indexOf(s)<0&&e[t.ref].push(s):e[t.ref]=[s]:e[t.ref]=s}return this._triggerDirective("bind",t),t.children.forEach(e=>{t.sp.addChild(this._createDisObj(e))}),j(),t.sp}_updateDisObj(t,e){if(t.vm){for(const s in t.vm.$props)d(this._vm.$props,s)&&(t.vm.$props[s]=this._vm.$props[s]),d(e.attrs,s)&&(t.vm.$props[s]=e.attrs[s]);const s=t.vm._parentOptions;for(const n in e.attrs)d(t.vm.$props,n)||(s.attrs[n]=e.attrs[n]);for(const n in e.on)s.listeners[n]=t.on[n]=e.on[n]=this._updateInvoker(n,t,e);for(const s in t.on)r(e.on[s])&&this._removeInvoker(s,t);for(const s in e.nativeOn)t.nativeOn[s]=e.nativeOn[s]=this._updateInvoker(s,t,e,!0);for(const s in t.nativeOn)r(e.nativeOn[s])&&this._removeInvoker(s,t,!0)}else{for(const s in e.on)t.on[s]=this._updateInvoker(s,t,e);for(const s in t.on)r(e.on[s])&&this._removeInvoker(s,t);for(const s in e.attrs)t.attrs[s]!==e.attrs[s]&&(d(t.sp[nt],s)||(t.sp[nt][s]=t.sp[s]),t.sp[s]=e.attrs[s]);for(const s in t.attrs)r(e.attrs[s])&&(t.sp[s]=t.sp[nt][s])}this._triggerDirective("update",e,t),this._updateChildren(t.children,e.children,e.sp),this._triggerDirective("componentUpdated",e,t)}_destroyDisObj(t){if(t.vm&&t.vm.$callHook("beforeDestroyed"),t.sp){if(this._triggerDirective("unbind",t),t.parent&&t.parent.sp&&t.parent.sp.removeChild(t.sp),!t.vm)for(const e in t.on)this._removeInvoker(e,t,!1);for(const e in t.nativeOn)this._removeInvoker(e,t,!0)}return t.ref&&delete this._vm.$refs[t.ref],t.children.forEach(t=>this._destroyDisObj(t)),t}_addInvoker(t,e,s=!1){const n=s?"nativeOn":"on",i=S(t);let o=e[n][t];return r(o.fns)&&(o=y(o,this._vm)),!e.vm||s?e.sp[i.once?"once":"addEventListener"](i.name,o,this._vm,i.capture):e.vm[i.once?"$once":"$on"](i.name,o),o}_updateInvoker(t,e,s,n=!1){const i=n?"nativeOn":"on",o=e[i][t],a=s[i][t];if(r(a));else{if(r(o))return this._addInvoker(t,s,n);if(a!==o)return o.fns=a,o}}_removeInvoker(t,e,s=!1){const n=s?e.nativeOn[t]:e.on[t],i=S(t);return!e.vm||s?e.sp.removeEventListener(i.name,n,this._vm,i.capture):e.vm.$off(i.name,n),n}_triggerDirective(t,e,s){if(e.directives){const n=s&&s.directives.reduce((t,e)=>(t[e.name]=e,t),{});for(const s of e.directives){const i=this._directives[s.name];if(i&&i[t]){const r={...s};n&&(d(n[s.name],"value")&&(r.oldValue=n[s.name].value),d(n[s.name],"arg")&&(r.oldArg=n[s.arg].value)),i[t].apply(this._vm,[e.sp,r].concat(Array.prototype.slice.call(arguments,1)))}}}}}const rt=new Set;function ot(t){!function t(e,s){let n,i;const r=Array.isArray(e);if(!r&&!o(e)||Object.isFrozen(e))return;if(e.__ob__){const t=e.__ob__.dep.id;if(s.has(t))return;s.add(t)}if(r)for(n=e.length;n--;)t(e[n],s);else for(i=Object.keys(e),n=i.length;n--;)t(e[i[n]],s)}(t,rt),rt.clear()}const at="undefined"!=typeof window,ct="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform&&WXEnvironment.platform.toLowerCase(),ht=at&&window.navigator.userAgent.toLowerCase();ht&&/msie|trident/.test(ht),ht&&ht.indexOf("msie 9.0");ht&&ht.indexOf("edge/");ht&&ht.indexOf("android");const lt=ht&&/iphone|ipad|ipod|ios/.test(ht)||"ios"===ct;ht&&/chrome\/\d+/.test(ht),ht&&/phantomjs/.test(ht),ht&&ht.match(/firefox\/(\d+)/);const pt=[];let ut=!1;function ft(){ut=!1;const t=pt.slice(0);pt.length=0;for(let e=0;e<t.length;e++)t[e]()}const dt=Promise.resolve();function _t(t,e){let n;if(pt.push(()=>{if(t)try{t.call(e)}catch(t){console.log(t,e,"nextTick")}else n&&n(e)}),ut||(ut=!0,dt.then(ft),lt&&setTimeout(s)),!t&&"undefined"!=typeof Promise)return new Promise(t=>{n=t})}const gt=[],vt=[];let mt={},yt=!1,$t=!1,bt=0;function Ot(){let t,e;for($t=!0,gt.sort((t,e)=>t.id-e.id),bt=0;bt<gt.length;bt++)t=gt[bt],t.before&&t.before(),e=t.id,mt[e]=null,t.run();const s=gt.slice();bt=gt.length=vt.length=0,mt={},yt=$t=!1,function(t){let e=t.length;for(;e--;){const s=t[e],n=s.vm;n._watcher===s&&n._isMounted&&!n._isDestroyed&&n.$callHook("updated")}}(s)}let wt=0;class Dt{constructor(t,n,i,r){if(r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.immediate=!!r.immediate,this.before=r.before):this.deep=this.user=this.lazy=this.sync=this.immediate=!1,t._watchers.push(this),this.id=wt++,this.active=!0,this.dirty=this.lazy,this.vm=t,this.deps=[],this.newDeps=[],this.depIds=new Set,this.newDepIds=new Set,this.cb=i||s,this.expression=n.toString(),"function"==typeof n?this.getter=n:(this.getter=function(t){if(e.test(t))return;const s=t.split(".");return function(t){for(let e=0;e<s.length;e++){if(!t)return;t=t[s[e]]}return t}}(n),this.getter||(this.getter=s)),this.value=this.lazy?void 0:this.get(),this.immediate)try{i.call(t,this.value)}catch(t){console.error(`callback for immediate watcher "${this.expression}"`)}}get(){let t;x(this);try{t=this.getter.call(this.vm,this.vm)}catch(t){console.log(t)}finally{this.deep&&ot(t),j(),this.cleanupDeps()}return t}addDep(t){const e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))}cleanupDeps(){let t=this.deps.length;for(;t--;){const e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}const e=this.depIds;this.depIds=this.newDepIds,this.newDepIds=e,this.newDepIds.clear();const s=this.deps;this.deps=this.newDeps,this.newDeps=s,this.newDeps.length=0}update(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){const e=t.id;if(null==mt[e]){if(mt[e]=!0,$t){let e=gt.length-1;for(;e>bt&&gt[e].id>t.id;)e--;gt.splice(e+1,0,t)}else gt.push(t);yt||(yt=!0,_t(Ot))}}(this)}run(){if(!this.active)return;const t=this.get();if(t!==this.value||o(t)){const e=this.value;this.value=t,this.cb.call(this.vm,t,e)}}evaluate(){this.value=this.get(),this.dirty=!1}depend(){let t=this.deps.length;for(;t--;)this.deps[t].depend()}teardown(){if(!this.active)return;let t=this.deps.length;for(;t--;)this.deps[t].removeSub(this);this.active=!1}}const At=Array.prototype,kt=Object.create(At),xt=Object.getOwnPropertyNames(kt);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){const s=At[e];t(kt,e,(function(...t){const n=s.apply(this,t),i=this.__ob__;let r;switch(e){case"push":case"unshift":r=t;break;case"splice":r=t.slice(2)}return r&&i.observeArray(r),i.dep.notify(),n}))}));class jt{constructor(e){var s;this.value=e,this.dep=new A,this.vmCount=0,t(e,"__ob__",this),Array.isArray(e)?(n?(s=kt,e.__proto__=s):function(e,s,n){for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e,r,s[r])}}(e,kt,xt),e.forEach(t=>Ct(t))):this.walk(e)}walk(t){for(const e in t)Et(t,e)}observeArray(t){t.forEach(t=>Ct(t))}}function Et(t,e,s){const n=new A,i=Object.getOwnPropertyDescriptor(t,e);if(i&&!1===i.configurable)return;const r=i&&i.get,o=i&&i.set;r&&!o||2!==arguments.length||(s=t[e]);let a=Ct(s);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get(){const e=r?r.call(t):s;return A.target&&(n.depend(),a&&(a.dep.depend(),Array.isArray(e)&&Tt(e))),e},set(e){const i=r?r.call(t):s;if(e!==i&&(e==e||i==i)){try{if((Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!(e instanceof egret.DisplayObject)&&JSON.stringify(e)===JSON.stringify(i))return}catch(t){console.log(t)}r&&!o||(o?o.call(t,e):s=e,a=Ct(e),n.notify())}}})}function Ct(t,e){if(!o(t))return;let s;return d(t,"__ob__")&&t.__ob__ instanceof jt?s=t.__ob__:!Array.isArray(t)&&!l(t)||!Object.isExtensible(t)||t instanceof egret.DisplayObject||t._isVue||(s=new jt(t)),e&&s&&s.vmCount++,s}function It(t,e,s){if(Array.isArray(t)&&p(e))return t.length=Math.max(t.length,e),t.splice(e,1,s),s;if(e in t&&!(e in Object.prototype))return t[e]=s,s;const n=t.__ob__;return t._isVue||n&&n.vmCount?(console.warn("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),s):n?(Et(n.value,e,s),n.dep.notify(),s):(t[e]=s,s)}function Ft(t,e){if(Array.isArray(t)&&p(e))return void t.splice(e,1);const s=t.__ob__;t._isVue||s&&s.vmCount?console.warn("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):d(t,e)&&(delete t[e],s&&s.dep.notify())}function Tt(t){t.forEach(t=>{t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Tt(t)})}function St(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Nt(t,e){return(Array.isArray(e)?e:[e]).some(e=>{return s=t,St(e)===St(s);var s})}function Vt(t,e){if("object"==typeof t&&t.type){if("function"==typeof t.default){if(!Nt(Function,t.type))return t.default.call(e)}else if(void 0===t.default){if(Nt(String,t.type))return"";if(Nt(Number,t.type))return 0;if(Nt(Boolean,t.type))return!1;if(Nt(Array,t.type))return[];if(Nt(Object,t.type))return{}}return t.default}return t}function Pt(t=[],e){if("Tween"in egret)return new Promise(s=>{let n=egret.Tween.get(e||this);t.forEach(([t,...e])=>{"function"==typeof n[t]&&(n=n[t](...e))}),n.call(s)});throw"The egret.Tween.js not import!!!"}class Ht{constructor(t={},e={}){this.$children=[],this.$refs={},this.$set=It,this.$delete=Ft,this.$nextTick=_t,this.$tween=Pt,this._global={},this._data={},this._props={},this._hasHookEvent=!1,this._isVue=!0,this._isMounted=!1,this._isBeingDestroyed=!1,this._isDestroyed=!1,this._watchers=[],this._events={},this._components={},this._directives={},this.$options=t,this._parentOptions=e,this._init()}_init(){this.$parent=this._parentOptions.parent,this.$parent&&this.$parent.$children.push(this),this.$root=this.$parent?this.$parent.$root:this,this._initMethods(this.$options.methods),this.$callHook("beforeCreate"),this._initGlobal(),this._initData(this.$options.data),this._initProps(this.$options.props,this._parentOptions.propsData),this._initComputed(this.$options.computed),this._initWatch(this.$options.watch),this._initComponents(this.$options.components),this._initDirectives(this.$options.directives),this.$callHook("created"),this._render=new it(this),this._initEvent()}_initEvent(){this.$el.once(egret.Event.ADDED,()=>this._render.inserted(),this.$el),this.$el.once(egret.Event.ADDED_TO_STAGE,()=>{this.$callHook("beforeMount"),this._global.stage=this.$el.stage,this._watcher=new Dt(this,()=>{this._render&&(this._isMounted&&this.$callHook("beforeUpdate"),this._render.update())},s),this._isMounted=!0,this.$callHook("mounted")},this.$el),this.$el.once(egret.Event.REMOVED_FROM_STAGE,()=>this.$destroy(),this.$el)}_initGlobal(){this._global={stage:new egret.Stage},Ct(this._global,!0)}_initProps(t={},e={}){const s=function(t){const e={};let s;if(Array.isArray(t))for(let n=t.length-1;n>=0;n--)s=t[n],"string"==typeof s&&(e[s]={type:null});else for(const n in t)s=t[n],e[n]=l(s)?s:{type:s};return e}(t);for(const t in s)this._props[t]=d(e,t)?e[t]:Vt(s[t],this),Object.defineProperty(this,t,{get(){return this._props[t]},set(t){console.error("The props data not set!")}});Ct(this._props,!0)}_initData(t){this._data="function"==typeof t?this._getData(t):t||{};for(const t in this._data)Object.defineProperty(this,t,{get(){return this._data[t]},set(e){this._data[t]=e}});Ct(this._data,!0)}_initMethods(t={}){for(const e in t)this[e]=t[e]}_initComputed(t={}){let e;for(const n in t){const i=t[n]||s;e="function"==typeof i?{get:i,set:s}:{get:i.get,set:i.set},Object.defineProperty(this,n,e)}}_initWatch(t={}){for(const e in t){const s=t[e];Array.isArray(s)?s.forEach(t=>this._createWatcher(e,t)):this._createWatcher(e,s)}}_initComponents(t={}){for(const e in t)this._components[e]=Mt.extend(t[e])}_initDirectives(t={}){for(const e in t)this._directives[e]=t[e]}_getData(t){x();try{return t.call(this,this)}catch(t){return console.log(t),{}}finally{j()}}_createWatcher(t,e,s){return l(e)&&(s=e,e=e.handler),"string"==typeof e&&(e=this[e]),this.$watch(t,e,s)}$on(t,e){if(Array.isArray(t))t.forEach(t=>this.$on(t,e));else{(this._events[t]||(this._events[t]=[])).push(e),s=t,u.test(s)&&(this._hasHookEvent=!0)}var s;return this}$once(t,e){const s=(...n)=>(this.$off(t,s),e.apply(this,n));return s.fn=e,this.$on(t,s),this}$off(t,e){if(!arguments.length)return this._events=Object.create(null),this._hasHookEvent=!1,this;if(Array.isArray(t))return t.forEach(t=>this.$off(t,e)),this;const s=this._events[t];if(!s)return this;if(!e)return this._events[t]=null,this;if(e){let t,n=s.length;for(;n--;)if(t=s[n],t===e){s.splice(n,1);break}}return this}$emit(t,...e){const s=this._events[t];return s&&[...s].forEach(t=>t.apply(this.$parent,e)),this}$watch(t,e,s){if(l(e))return this._createWatcher(t,e,s);const n=new Dt(this,t,e,s=s||{});return function(){n.teardown()}}$callHook(t,...e){x(),"function"==typeof this.$options[t]&&this.$options[t].call(this,...e),this._hasHookEvent&&this.$emit("hook:"+t),j()}$forceUpdate(){this._watcher&&this._watcher.update()}$mount(t){return t instanceof egret.DisplayObjectContainer&&this.$el&&t.addChild(this.$el),this}$destroy(){if(!this._isBeingDestroyed){if(this.$callHook("beforeDestroy"),this._isBeingDestroyed=!0,this.$parent&&!this.$parent._isBeingDestroyed){const t=this.$parent.$children.indexOf(this);t>-1&&this.$parent.$children.splice(t,1)}this._watcher&&(this._watcher.teardown(),this._watcher=null,this._watchers=null),this._render&&(this._render.destroy(),this._render=null),this._events&&(this._events=null),this._isDestroyed=!0,this.$callHook("destroyed")}}$displayObject(t,e){if("string"==typeof t){const s=this.$refs[t];return Array.isArray(s)?e?s.map(t=>this.$displayObject(t)):this.$displayObject(s[0]):this.$displayObject(s)}return t instanceof Ht?t.$el:t instanceof egret.DisplayObject?t:null}$hitTest(t,e){const s=this.$displayObject(t),n=this.$displayObject(e);if(!s||!n)return!0;const i=s.getBounds(),r=n.getBounds();return i.x=s.x,i.y=s.y,r.x=n.x,r.y=n.y,i.intersects(r)}$hitTestPoint(t,e,s,n){const i=this.$displayObject(t);return!!i&&i.hitTestPoint(e,s,n)}$globalToLocal(t,e,s){const n=this.$displayObject(t),i=new egret.Point(e,s);return n&&n.globalToLocal(e,s,i),i}$localToGlobal(t,e,s){const n=this.$displayObject(t),i=new egret.Point(e,s);return n&&n.localToGlobal(e,s,i),i}get $stage(){return this._global.stage}get $stageWidth(){return this._global.stage.stageWidth}get $stageHeight(){return this._global.stage.stageHeight}get $data(){return this._data}get $props(){return this._props}get $attrs(){return this._parentOptions.attrs||i}get $listeners(){return this._parentOptions.listeners||i}}class Mt extends Ht{constructor(t){super(t)}static component(t,e){return e?Mt._components[t]=Mt.extend(e):Mt._components[t]}static directive(t,e){return e?Mt._directives[t]="function"==typeof e?{bind:e,update:e}:e:Mt._directives[t]}static extend(t){var e;return"function"==typeof t?t:((e=class extends Ht{constructor(e={}){super(t,e)}}).options=t,e)}static classMain(t){return class extends egret.DisplayObjectContainer{constructor(){super(),this.vm=new(Mt.extend(t)),this.vm.$mount(this)}}}}return Mt.version="1.4.0",Mt._components={},Mt._directives={},Mt.set=It,Mt.delete=Ft,Mt.nextTick=_t,Mt}));
